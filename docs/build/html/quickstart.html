

<!DOCTYPE html>
<html class="writer-html5" lang="python" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Quickstart &mdash; phot2lc 1.6.9 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Barycentric Corrections" href="barycorr.html" />
    <link rel="prev" title="Configuration" href="configuration.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> phot2lc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-files">Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#startup">Startup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-options">Command Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#aperture-selection">Aperture Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-files">Output Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-lc-file">The .lc File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-phot-file">The .phot File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-phot2lc-log-file">The phot2lc_log File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="barycorr.html">Barycentric Corrections</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional.html">Additional Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html#contact">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Need Help</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">phot2lc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>This quickstart guide assumes you have already performed aperture photometry using either IRAF's ccd_hsp or the Matlab-based MAESTRO software, and have already <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">configured phot2lc</span></a> to run properly on your machine.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#basic-usage">Basic Usage</a></p></li>
<li><p><a class="reference internal" href="#input-files">Input Files</a></p></li>
<li><p><a class="reference internal" href="#startup">Startup</a></p></li>
<li><p><a class="reference internal" href="#command-options">Command Options</a></p></li>
<li><p><a class="reference internal" href="#aperture-selection">Aperture Selection</a></p></li>
<li><p><a class="reference internal" href="#output-files">Output Files</a></p></li>
</ul>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>phot2lc is a command line tool, and can be executed from the command line by simply typing</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>phot2lc
</pre></div>
</div>
<p>phot2lc also has several command line arguments available which can be used individually, or all at once:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-h --help      Show command line options
-c --codes     Print a list of available telescope codes
-t --telescope Code name for telescope used
-s --source    Code name for photometry program used
-i --image     Name of specific image instead of list
-o --object    Name of object matching stars.dat entry
-b --barycorr  If invoked, do NOT perform barycentric corrections.
</pre></div>
</div>
<p>If these command line options are used, they will override the defaults that are set within the config.dat file by the photconfig program.</p>
</div>
<div class="section" id="input-files">
<h2>Input Files<a class="headerlink" href="#input-files" title="Permalink to this headline">¶</a></h2>
<p>For ccd_hsp output, phot2lc will assume the photometry files have base names of <em>runbase</em> followed by the aperture size (e.g. runbase2.5), while for MAESTRO output the photometry files are assumed to have base names of <em>counts</em>, again followed by the aperture size (e.g. counts_02.5).</p>
<p>In addition, the following files/info should be present:</p>
<ul class="simple">
<li><p><a class="reference internal" href="configuration.html#the-stars-dat-file"><span class="std std-ref">stars.dat</span></a> (for RA and Dec coordinates)</p></li>
<li><p>The first FITS image (or all images within <strong>image_list_name</strong>)</p></li>
<li><p>If available, the file pointed to by <strong>pixloc_name</strong></p></li>
<li><p>An entry within teledat.py corresponding to your telescope/instrument</p>
<ul>
<li><p>If you need to add a new entry into teledat.py for your telescope/instrument, you can do this yourself by manually editing the teledat.py file. The format for teledat.py entries is explained within the script itself. Alternatively, you can <a class="reference internal" href="license.html#contact"><span class="std std-ref">send a request to Zach Vanderbosch</span></a> to add your telescope configuration into the official phot2lc package.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="startup">
<h2>Startup<a class="headerlink" href="#startup" title="Permalink to this headline">¶</a></h2>
<p>Once you have started phot2lc and it successfully loads all the necessary files, the following three windows will appear (<em>click to enlarge</em>):</p>
<p><a class="reference internal" href="_images/first_image.png"><img alt="First Image" src="_images/first_image.png" style="width: 32%;" /></a> <a class="reference internal" href="_images/raw_photometry.png"><img alt="Raw Photometry" src="_images/raw_photometry.png" style="width: 32%;" /></a> <a class="reference internal" href="_images/divided_lc.png"><img alt="Divided Light Curve" src="_images/divided_lc.png" style="width: 32%;" /></a></p>
<p>From left to right, these windows are named:</p>
<ul class="simple">
<li><p><strong>First Image</strong>: Displays the first image. The target and comparison stars are marked if a <em>pixloc_name</em> file was provided, otherwise this will just be an unmarked image. This image will be saved as a PNG file when the program is run.</p></li>
<li><p><strong>Raw Photometry</strong>: Displays the raw photometry for target and comparison stars, along with the amount of sky subtracted from the target. The mean values are displayed to the right of each light curve.</p></li>
<li><p><strong>Divided Light Curve</strong>: Primarily displays the divided light curve, but also displays the summed comparison star flux (top right panel) and the polynomial being used to de-trend the light curve (top left panel). This is where most of the interactive tools are used.</p></li>
</ul>
</div>
<div class="section" id="command-options">
<h2>Command Options<a class="headerlink" href="#command-options" title="Permalink to this headline">¶</a></h2>
<p>Similar to WQED, commands in phot2lc are executed via keyboard inputs. After startup and once you have clicked within one of the windows, you can print out a full list of command options in your terminal by pressing &quot;?&quot;. The output will look like the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>COMMAND LIST - Divided Light Curve:
  - Type &#39;?&#39; to re-print this list of commands.
  - Type &#39;d&#39; to delete the point nearest the cursor.
  - Type &#39;a&#39; to add back a deleted point.
  - Type &#39;A&#39; to add back ALL deleted points.
  - Type &#39;g&#39; to activate/deactivate garbage rectangle.
  - Type &#39;r&#39; to activate/deactivate reverse garbage rectangle.
  - Type &#39;z&#39; to activate/deactivate zoom rectangle.
  - Type &#39;Z&#39; to restore zoom to original.
  - Type &#39;x&#39; to perform sigma clipping.
  - Type &#39;s&#39; to toggle the display of deleted points.
  - Type &#39;f&#39; to perform a polynomial fit, WITHOUT sigma rejections.
  - Type &#39;F&#39; to perform a polynomial fit, WITH sigma rejections.&quot;
  - Type &#39;c&#39; to choose comparison stars for division.
  - Type &#39;v&#39; to move to previous aperture size.
  - Type &#39;w&#39; to move to next aperture size.
  - Type &#39;Q&#39; to close plots and exit the program.
  - Type &#39;W&#39; to close plots and continue without grid search.
  - Type &#39;G&#39; to close plots and continue with grid search.

COMMAND LIST - Aperture Selection:
  - Type &#39;?&#39; to re-print this list of commands.
  - Type &#39;d&#39; to delete the point nearest the cursor.
  - Type &#39;A&#39; to add back all deleted points.
  - Type &#39;Q&#39; to close plots and exit the program.
  - Type &#39;W&#39; to save lightcurve with *USER* Selection.
  - Type &#39;G&#39; to save lightcurve with *GRID* Selection.
</pre></div>
</div>
<p>The &quot;Divided Light Curve&quot; command list provides your options when you are working within the <em>Divided Light Curve</em> window. Within the <em>First Image</em> and <em>Raw Photometry</em> windows, the only commands available are &quot;?&quot;, &quot;Q&quot;, &quot;W&quot;, and &quot;G&quot;. The other command list for aperture selection is for the next window that appears if you decide to continue light curve extraction by typing the &quot;W&quot; or &quot;G&quot; keys when working in the <em>Divided Light Curve</em> window.</p>
</div>
<div class="section" id="aperture-selection">
<h2>Aperture Selection<a class="headerlink" href="#aperture-selection" title="Permalink to this headline">¶</a></h2>
<p>phot2lc selects the optimal aperture size by identifying the light curve with the lowest average point-to-point (P2P) scatter. The average P2P scatter is defined as:</p>
<div class="math notranslate nohighlight">
\[\langle\mathrm{P2P}\rangle = \sqrt{\frac{\sum_{i=0}^{N-1}(y_{i+1}-y_i)^2}{N-1}}\]</div>
<p>The <span class="math notranslate nohighlight">\(\langle\mathrm{P2P}\rangle\)</span> is determined for all light curves using the same settings defined in the <em>Divided Light Curve</em> window (i.e. same deleted points, same polynomial division, same comparison stars used). Currently, this selection is automated and phot2lc does not allow manual selection of a different aperture size. <em>A future version of phot2lc will likely provide this capability.</em></p>
<p>After pressing the &quot;W&quot; or &quot;G&quot; key from any of the previous windows (i.e. <em>Divided Light Curve</em>, <em>Raw Photometry</em>, or <em>First Image</em>), these windows will be closed and a new window will appear named <em>Aperture Selection</em>. This window displays the optimal light curve along with its periodogram, and a plot of <span class="math notranslate nohighlight">\(\langle\mathrm{P2P}\rangle\)</span> versus aperture size for all light curves.</p>
<p>If you chose the &quot;W&quot; option to continue, only one light curve, periodogram, and <span class="math notranslate nohighlight">\(\langle\mathrm{P2P}\rangle\)</span> curve will be shown (left image below). If you chose the &quot;G&quot; key, however, a grid search will have been performed considering all possible comparison star and aperture size combinations. In this case, two light curves, periodograms, and <span class="math notranslate nohighlight">\(\langle\mathrm{P2P}\rangle\)</span> curves will be shown (right image below). One set (colored white) corresponds to the standard optimization procedure performed with the User-selected comparison stars, the same as if you had pressed &quot;W&quot;. The second set (colored red), corresponds to the optimal comparison star combination found by the grid search.</p>
<p><a class="reference internal" href="_images/aperture_selection_user.png"><img alt="First Image" src="_images/aperture_selection_user.png" style="width: 49%;" /></a> <a class="reference internal" href="_images/aperture_selection_grid.png"><img alt="First Image" src="_images/aperture_selection_grid.png" style="width: 49%;" /></a></p>
<p>If you did not perform a grid search, you can now save the optimal light curve by again pressing &quot;W&quot;. If you did perform a grid search, you have the option save either the optimal user-selected light curve with &quot;W&quot; or the optimal grid-search-selected light curve with &quot;G&quot;.</p>
</div>
<div class="section" id="output-files">
<h2>Output Files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#the-lc-file">The .lc File</a></p></li>
<li><p><a class="reference internal" href="#the-phot-file">The .phot File</a></p></li>
<li><p><a class="reference internal" href="#the-phot2lc-log-file">The phot2lc_log File</a></p></li>
</ul>
<p>Upon choosing to save your light curve with &quot;W&quot; or &quot;G&quot;, phot2lc will perform the <a class="reference internal" href="barycorr.html#barycentric-corrections"><span class="std std-ref">barycentric time corrections</span></a> to each point and then provide you with three output files. The <a class="reference internal" href="#the-lc-file"><span class="std std-ref">.lc</span></a> file contains the divided light curve while the <a class="reference internal" href="#the-phot-file"><span class="std std-ref">.phot</span></a> file contains the raw photometry corresponding to the optimal aperture size. These files are modeled very closely after the <em>.lc1</em> and <em>.wq</em> files generated by WQED. The third output file is called, <a class="reference internal" href="#the-phot2lc-log-file"><span class="std std-ref">phot2lc_log.txt</span></a>, and stores information about your saved light curve which allows phot2lc to essentially restore your session for a particular object (<a class="reference internal" href="#the-phot2lc-log-file"><span class="std std-ref">more details below</span></a>).</p>
<p>The .lc and .phot files start with two time columns, the first corresponding to the original times and the second corresponding to the barycentric corrected times. Both are provided in the event that you consider the barycentric corrections for your particular object to be unreliable for any reason.</p>
<p>The naming convention for the files are <strong>&lt;object&gt;_&lt;obs_date&gt;.lc</strong> and <strong>&lt;object&gt;_&lt;obs_date&gt;.phot</strong>, where &lt;object&gt; is replaced by the object name and &lt;obs_date&gt; is replaced by the observation date in YYYYMMDD format.</p>
<div class="section" id="the-lc-file">
<h3>The .lc File<a class="headerlink" href="#the-lc-file" title="Permalink to this headline">¶</a></h3>
<p>The .lc file consists of a header followed by three columns of data. The header provides information with regards to both the observations and the light curve extraction. The three columns are (1) the mid-exposure times in seconds relative to the first exposure, (2) the relative flux values, and (3) the error on the relative flux. Below is an example .lc1 file showing the header and the first and last three rows of data:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Object     = G117-B15A                     # Name of Object
# RA         = 09 24 15.27                   # Object Right Ascension
# Dec        = +35 16 51.3                   # Object Declination
# Telescope  = McDonald 2.1m                 # Name of Telescope
# Instrument = ProEM                         # Name of Instrument
# TeleCode   = mcd2                          # Teledat Code Name
# Date       = 2018-01-26                    # Mid-Exposure UTC Date at T0
# Time       = 05:06:01.500                  # Mid-Exposure UTC Time at T0
# MJD        = 58144.212517361               # Mid-Exposure UTC MJD at T0
# Exptime    = 15.000000                     # Exposure Time (s)
# Filter     = BG40                          # Filter Name
# BJED       = 2458144.718681479             # Mid Exp. Barycentric Julian Date
# Barycorr   = True                          # Barycentric Corrections Applied?
# ApPhot     = ccd_hsp                       # Photometry Program
# OrigFile   = runbase6.                     # Source Photometry Filename
# ApRadius   = 6.00                          # Aperture Radius (pixels)
# AvgScatter = 1.25                          # Avg. Point-to-Point Scatter (%)
# Comps      = 2                             # Comparison stars used
# PolyOrder  = 3                             # Degree of Polynomial Division
# Nkeep      = 1049                          # Number of points in light curve
# Ndelete    = 0                             # Number of points removed
# Author     = Zach Vanderbosch              # Author of this light curve
# CreatedOn  = 2021-02-10 08:57:51.459       # Date created
# Columns: Time (s), Relative Flux, Relative Flux Error
        0.000  -0.031284   0.002743
       15.000  -0.030957   0.002611
       30.000  -0.029607   0.002626
       ...        ...        ...
    15690.173  -0.011376   0.002271
    15705.173  -0.029081   0.002532
    15720.174  -0.024124   0.002615
</pre></div>
</div>
</div>
<div class="section" id="the-phot-file">
<h3>The .phot File<a class="headerlink" href="#the-phot-file" title="Permalink to this headline">¶</a></h3>
<p>The .phot file also starts with a header providing some of the same information as the .lc file, and is then followed by several columns of data. The first column is the same as for the .lc file, providing the mid-exposure times with respect to the first exposure.</p>
<p>The remaining columns provide the sky-subtracted photometric counts for the target followed by each comparison star. The last column is always the sky column and represents the amount of background counts subtracted from the target's aperture. Sky counts are not provided for the comparison stars. The number of comparison star columns will reflect the original number of comparison stars loaded in the <em>ccd_hsp</em> or <em>MAESTRO</em> photometry files, even if they don't all get used to generate the divided light curve. However, if specific points were deleted from the divided light curve, they will also be removed from this file.</p>
<p>Below is an example .phot file, again showing the header followed by the first and last three rows of data:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Object     = G117-B15A                     # Name of Object
# RA         = 09 24 15.27                   # Object Right Ascension
# Dec        = +35 16 51.3                   # Object Declination
# Telescope  = McDonald 2.1m                 # Name of Telescope
# Instrument = ProEM                         # Name of Instrument
# TeleCode   = mcd2                          # Teledat Code Name
# Date       = 2018-01-26                    # Mid-Exp. UTC Start Date
# Time       = 05:06:01.500                  # Mid-Exp. UTC Start Time
# MJD        = 58144.212517361               # Mid Exposure UTC MJD Start
# Exptime    = 15.000000                     # Exposure Time (s)
# Filter     = BG40                          # Filter Name
# BJED       = 2458144.718681479             # Mid Exp. Barycentric Julian Date
# Barycorr   = True                          # Barycentric Corrections Applied?
# ApPhot     = ccd_hsp                       # Photometry Program
# OrigFile   = runbase6.                     # Source Photometry Filename
# ApRadius   = 6.00                          # Aperture Radius (pixels)
# Nkeep      = 1049                          # Number of points in light curve
# Ndelete    = 0                             # Number of points removed
# Columns: Time (s), Target, Comparisons, Sky
       0.000     192620    88577    25195    78351
          15.000     206569    94587    27371    76162
      30.000     204690    92457    28212    75914
      ...         ...       ...      ...      ...
   15690.173     214079    93761    27382    13946
   15705.173     175979    78464    22928    14297
   15720.174     166926    73647    22034    15337
</pre></div>
</div>
</div>
<div class="section" id="the-phot2lc-log-file">
<h3>The phot2lc_log File<a class="headerlink" href="#the-phot2lc-log-file" title="Permalink to this headline">¶</a></h3>
<p>The <em>phot2lc_log.txt</em> file saves information about the light curve extraction so that if you want to rerun phot2lc for an object, it will automatically apply the same changes that you had already made. This file is only generated if you have previously saved a light curve and includes information about which points had been deleted, what polynomial was used for detrending, and which comparison stars had been used for division. This can save large amounts of time for users when small modifications need to be made after the original light curve extraction.</p>
<p>In addition, this file stores each data point's raw timestamp, prior to barycentric corrections, so that the timing information is preserved. This is useful if phot2lc originally generated timestamps via the header keywords within a list of FITS files, but you would like to remove most of the FITS files post-extraction to save computer space. If a <em>phot2lc_log</em> file is present, phot2lc will preferentially use it to generate the time stamps upon execution.</p>
<p>An example <em>phot2lc_log</em> file is shown below, which shows the header and the first and last three rows of data. The first data column provides the raw mid-exposure times relative to the first exposure, and the second column is just a boolean value where 0 = Deleted and 1 = Kept.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>#     OBJECT = G117-B15A
# POLYNOMIAL = 3,0,3.00,3.00
#      DTMID = 2018-01-26T05:06:01.500
#      COMPS = 1+2
#       TEXP = 15.000000
     0.000  1
    15.000  1
    30.000  1
    ...    ...
 15690.000  1
 15705.000  1
 15720.000  1
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="barycorr.html" class="btn btn-neutral float-right" title="Barycentric Corrections" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="configuration.html" class="btn btn-neutral float-left" title="Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Zach Vanderbosch.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>